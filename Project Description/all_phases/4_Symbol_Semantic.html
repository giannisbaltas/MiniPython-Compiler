<html>
<head>
	<title>Πίνακας Συμβόλων - Σημασιολογική Ανάλυση</title>
	<meta http-equiv="Content-Type" content="text/html; charset=windows-1253">
</head>

<body>
<font face="Arial">
	
<h1>Πίνακας Συμβόλων - Σημασιολογική Ανάλυση</h1>
<hr>

<h3>Σκοπός της άσκησης</h3>
<p>Η σημασιολογική ανάλυση ενός προγράμματος γραμμένο σε MiniPython. Για αυτό το λόγο αρχικά θα πρέπει να κατασκευάσετε έναν πίνακα συμβόλων για την αποθήκευση απαραίτητων για την σημασιολογική ανάλυση στοιχείων π.χ μέθοδοι, μεταβλητές. Ο πίνακας συμβόλων θα χρησιμοποιηθεί μετέπειτα από έναν ελεγκτή τύπων. Ο έλεγχος θα πρέπει να γίνει πάνω στο αφηρημένο συντακτικό δέντρο που έχετε δημιουργήσει στην προηγούμενη άσκηση.</p>

<h3>Παρεχόμενος κώδικας</h3>
<p>Υπενθυμίζεται ότι το SableCC έχει παράγει διάφορα αρχεία .java βασιζόμενο στο αρχείο γραμματικής που είχατε φτιάξει στα προηγούμενα στάδια της εργασίας. Τα είχε τοποθετήσει σε κατάλληλους καταλόγους σύμφωνα με την κατηγορία τους. Σε αυτά τα αρχεία θα πρέπει να βασιστείτε, ώστε να προχωρήσετε στη σημασιολογική ανάλυση.</p>

<h3>Δημιουργία και συμπλήρωση πίνακα συμβόλων</h3>
<p>Θα πρέπει να ορίσουμε τάξεις οι οποίες θα χρησιμεύσουν στην αποθήκευση συμβόλων της MiniPython. Όπως αναφέρθηκε παραπάνω τα σύμβολα αυτά περιλαμβάνουν μεθόδους, παραμέτρους μεθόδων, τοπικές μεταβλητές, περιστασιακές μεταβλητές ή πεδία (fields).</p>

<p>Στη συνέχεια θα χρησιμοποιήσετε Visitors για να διασχίσετε το ΑΣΔ.  Το εργαλείο SableCC μας παρέχει τον visitor έτοιμο κάτω από το όνομα Switches. Για να δείτε πώς μπορείτε να δουλέψετε με αυτούς στο πλαίσιο του SableCC μπορείτε να κοιτάξετε τη διατριβή του <a href="files/sablecc_thesis.pdf">διατριβή του Εtienne Gagnon</a>. Συνοπτικά, θα πρέπει να γράψετε μια τάξη επισκέπτη που θα κληρονομεί (extends) την DepthFirstAdapter που βρίσκεται στον κατάλογο MiniPython/analysis. Στην τάξη που θα γράψετε θα ακυρώσετε (override) όσες μεθόδους της DepthFirstAdapter χρειάζεται. Οι μέθοδοι που εσείς θα γράψετε θα πρέπει να λειτουργούν με σκοπό την συμπλήρωση πίνακα συμβόλων και την ανίχνευση λαθών κατά την διαδικασία αυτή.</p>

<p>Έγγραφα που περιέχονται επιπλέον οδηγίες για το στάδιο αυτό είναι τα:
<ul>
	<li><a href = "files/sablecc-ast.doc">Οδηγίες για τους Visitors - DepthFirstAdapter (MS word)</a></li>
	<li><a href ="files/AST-traverser.pdf">Οδηγίες διάσχισης ΑΣΔ </a></li>
</ul></p>

<p>Όπου ανιχνεύεται κάποιο λάθος θα πρέπει να εμφανίζεται ανάλογο μήνυμα λάθους.</p>

<p>Ιδανικά θα πρέπει να δημιουργηθούν τουλάχιστον 2 επισκέπτες που θα κάνουν τους εξής ελέγχους:<br>
1) Χρήση μη δηλωμένης μεταβλητής, π.χ<br/>
<code>
def add(x,y):<br/>
&nbsp;&nbsp;&nbsp;return x + y<br/>
print k<br/>
</code>
Μια μεταβλητή θεωρούμε ότι έχει δηλωθεί αν της έχει ανατεθεί μια τιμή ή αν χρησιμοποείται ως όρισμα σε 
δήλωση συνάρτησης. Όλες οι μεταβλητές είναι global<br/>
*Προσοχή* ο παρακάτω κώδικας είναι λάθος, επειδή η μεταβλητή πρώτα χρησιμοποιείται και μετά δηλώνεται:<br/>
<code>
def add(x,y):<br/>
&nbsp;&nbsp;&nbsp;return x + y<br/>
print k<br/>
k =0<br/>
</code>
<br/>2) Κλήση μη δηλωμένης συνάρτησης (εδώ μια συνάρτηση <b>μπορεί</b> να χρησιμοποιηθεί πριν τη δήλωση)<br/>
<br/>3) Λάθος ορισμός ορισμάτων σε κλήση συνάρτησης<br/>
*Προσοχή* στις default τιμές<br/>
Ο παρακάτω κώδικας είναι σωστός<br/>
<code>
def add(x,y=2):<br/>
&nbsp;&nbsp;&nbsp;return x + y<br/>
print add(1)<br/>
</code>
<br/>4)Χρήση μεταβλητής διαφορετικού τύπου (π.χ. Integer με String) ως ακέραιο π.χ<br/>
<code>
x="hello world"<br/>
print x+2<br/>
</code>
*Προσοχή* στην κλήση συναρτήσεων<br/>
Ο παρακάτω κώδικας είναι λάθος<br/>
<code>
def add(x,y):<br/>
&nbsp;&nbsp;&nbsp;return x + y<br/>
k="hello world"	<br/>
print add(2,k)<br/>
</code>
<br/>5)Πράξεις στις οποίες χρησιμοποιούνται ως τελεστές τα: None, open(file,p), type(variable)<br/>
<br/>6)Λάθος τρόπος χρήσης συνάρτησης π.χ <br/>
<code>
def add(x,y):<br/>
&nbsp;&nbsp;&nbsp;return "hello world"<br/>
print add(2,1)+2<br/>
</code>
<br/>7)Επανάληψη δήλωσης συνάρτησης <b>με τον ίδιο</b> αριθμό ορισμάτων
<br/>Προσοχή, αν μια συνάρτηση έχει 2 ορίσματα, και μια με το ίδιο όνομα έχει 3 αλλά
το ένα έχει default τιμή, πάλι αυτό είναι λάθος. Δηλαδή οι παρακάτω δηλώσεις είναι λάθος<br/>
<code>
def add(x,y): <br/>
def add(x,y,z=1)<br/>
</code>
Επίσης οι παρακάτω δηλώσεις είναι λάθος:<br/>
<code>
def add(x,y,z): <br/>
def add(x,y,z=1)<br/>
</code>
</p>



<p>Όπως αναφέρθηκε παραπάνω δεν δίνεται κάποιο επιπλέον αρχείο στην φάση αυτή. Θα τροποποιήσετε το αρχείο ParserTest1.java ώστε να σας βοηθήσει στον έλεγχο της ορθότητας της υλοποίησής σας. Συγκεκριμένα μετά την γραμμή:<br>
<pre><font color=blue>Start ast = parser.parse();</font></pre><br>
στο αρχείο ParserTest1.java θα πρέπει να προσθέσετε μια γραμμή για κάθε διάσχιση αφηρημένου συντακτικού δέντρου με χρήση Visitor. Δηλαδή <b>αν</b> ορίσετε την τάξη &quot;SymplirosiPinakaSymbolon&quot;, η οποία κληρονομεί την τάξη DepthFirstAdapter, τότε για να ελέγξετε το αποτέλεσμα του κώδικα που έχετε γράψει προθέστε την γραμμή:<br>
<pre><font color=blue>t.apply(new SymplirosiPinakaSymbolon());</font></pre></p>

<p>Στο παράδειγμα υποθέτουμε ότι ο κατασκευαστής της τάξης που ορίσατε δεν παίρνει παραμέτρους. Με την παραπάνω γραμμή γίνεται μία επιπλέον διάσχιση του αφηρημένου συντακτικού δέντρου κατά την οποία μπορείτε να κάνετε τους ελέγχους που εσείς θέλετε κάνοντας override συγκεκριμένες μεθόδους της DepthfirstAdapter στην τάξη &quot;SymplirosiPinakaSymbolon&quot;.</p>

<p>Επίσης αφαιρέστε την παρακάτω γραμμή από το αρχείο ParserTest1.java:<br>
<pre><font color=blue>System.out.println(ast);</font></pre></p>

<p>
Θα παρατηρήσετε ότι η έξοδος πλέον περιέχει μηνύματα λάθους που εσείς έχετε προσθέσει για την αντιμετώπιση των πιθανών λαθών του προγραμματιστή.</p>


</font>
</body>
</html>
